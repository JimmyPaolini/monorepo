# Plan: Create composite action workflow template

A composite action at [.github/actions/nx-setup/action.yml](.github/actions/nx-setup/action.yml) will encapsulate the 8 repetitive setup steps (checkout, pnpm, node, nx-shas, cache restore, install, verify) used across 9+ task workflows. This maintains the current two-job pattern (setup job + task job) while reducing each workflow from ~60 lines to ~25 lines (58% reduction). Workflow-specific steps (artifact uploads) remain in individual workflows, and pnpm/node versions are centralized in the action for easy upgrades.

## Steps

1. **Create [.github/actions/nx-setup/action.yml](.github/actions/nx-setup/action.yml)** - Define composite action with single required input `cache-key`, hardcoded pnpm 10.20.0 and node 22.20.0, containing all 8 common setup steps with proper shell specifications and comments documenting the version upgrade benefit
2. **Update all task workflows to use composite action** - Replace 8 individual setup steps with single `uses: ./.github/actions/nx-setup` step in [lint.yml](.github/workflows/lint.yml), [test.yml](.github/workflows/test.yml), [typecheck.yml](.github/workflows/typecheck.yml), [format.yml](.github/workflows/format.yml), [knip.yml](.github/workflows/knip.yml), [bundlesize.yml](.github/workflows/bundlesize.yml), [type-coverage.yml](.github/workflows/type-coverage.yml), [dependency-check.yml](.github/workflows/dependency-check.yml), and [security-audit.yml](.github/workflows/security-audit.yml), preserving workflow-specific steps like artifact uploads
3. **Fix broken references in failing workflows** - Update [markdown-lint.yml](.github/workflows/markdown-lint.yml), [spell-check.yml](.github/workflows/spell-check.yml), and [license-check.yml](.github/workflows/license-check.yml) to use new composite action and add missing setup job
4. **Create [documentation/github-actions-workflows.md](documentation/github-actions-workflows.md)** - Document the nx-setup composite action pattern, version upgrade process, minimal workflow template example, and when to use the pattern vs custom workflows
