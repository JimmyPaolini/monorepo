# Caelundas Production Environment Configuration
# Use this file when deploying the caelundas application to production
# Example: helm install -f values/base.yaml -f values/caelundas-production.yaml
#
# Note: Release names are auto-generated using git commit + timestamp
# This allows multiple jobs to run concurrently with separate PVCs

nameOverride: "caelundas"
# fullnameOverride removed - using dynamic release names instead

# Metadata for tracking job provenance
metadata:
  gitCommit: "" # Set via --set during deployment
  timestamp: "" # Set via --set during deployment

image:
  repository: ghcr.io/jimmypaolini/caelundas
  pullPolicy: Always
  tag: "1.0.0"

job:
  backoffLimit: 3
  completions: 1
  parallelism: 1
  ttlSecondsAfterFinished: 86400

# Environment variables
env:
  # üó∫Ô∏è Location Configuration
  - name: LATITUDE
    value: "39.949309"
  - name: LONGITUDE
    value: "-75.17169"

  # üìÜ Date Range Configuration
  - name: START_DATE
    value: "2025-01-01"
  - name: END_DATE
    value: "2025-12-31"

  # üì§ Output Configuration
  - name: OUTPUT_DIRECTORY
    value: "/app/output"

  # üîÑ Retry Configuration
  - name: MAX_RETRIES
    value: "5"
  - name: INITIAL_DELAY_MS
    value: "1000"
  - name: MAX_DELAY_MS
    value: "30000"
  - name: BACKOFF_MULTIPLIER
    value: "2"

persistence:
  enabled: true
  storageClassName: "linode-block-storage-retain"
  accessMode: ReadWriteOnce
  size: 1Gi
  mountPath: /app/output

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

nodeSelector: {}

tolerations: []

affinity: {}
