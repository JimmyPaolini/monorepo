# Caelundas Production Environment Configuration
# Use this file when deploying the caelundas application to production
# Example: helm install -f values/base.yaml -f values/caelundas-production.yaml
#
# Note: Release names are auto-generated using git commit + timestamp
# This allows multiple jobs to run concurrently with separate PVCs

nameOverride: "caelundas"
# fullnameOverride removed - using dynamic release names instead

# Metadata for tracking job provenance
metadata:
  gitCommit: "" # Set via --set during deployment
  timestamp: "" # Set via --set during deployment

image:
  repository: ghcr.io/jimmypaolini/caelundas
  pullPolicy: Always
  tag: "1.0.0"

job:
  backoffLimit: 3
  completions: 1
  parallelism: 1
  ttlSecondsAfterFinished: 86400

# Environment variables
env:
  - name: OUTPUT_DIR
    value: "/app/data"

  # üó∫Ô∏è Location Configuration
  - name: LATITUDE
    value: "39.949309"
  - name: LONGITUDE
    value: "-75.17169"
  - name: TIMEZONE
    value: "America/New_York"

  # üìÜ Date Range Configuration
  - name: START_DATE
    value: "2025-01-01"
  - name: END_DATE
    value: "2025-12-31"

  # üé´ Event Types Configuration
  - name: EVENT_TYPES
    value: "ingresses,aspects,retrogrades,planetaryPhases,annualSolarCycle,monthlyLunarCycle,dailySolarCycle,dailyLunarCycle,twilights"

  # üö™ Ingress Configuration
  - name: INGRESSES
    value: "signs,decans,peaks"
  - name: SIGN_INGRESS_BODIES
    value: "sun,moon,mercury,venus,mars,jupiter,saturn,uranus,neptune,pluto,chiron,lilith,ceres,pallas,juno,vesta,halley,north lunar node,lunar apogee"
  - name: DECAN_INGRESS_BODIES
    value: "sun,moon,mercury,venus,mars,jupiter,saturn,uranus,neptune,pluto,chiron,lilith,ceres,pallas,juno,vesta,halley,north lunar node,lunar apogee"
  - name: PEAK_INGRESS_BODIES
    value: "sun,moon,mercury,venus,mars,jupiter,saturn,uranus,neptune,pluto,chiron,lilith,ceres,pallas,juno,vesta,halley,north lunar node,lunar apogee"

  # üìê Aspect Configuration
  - name: ASPECTS
    value: "majorAspects,minorAspects,specialtyAspects"
  - name: MAJOR_ASPECT_BODIES
    value: "sun,mercury,venus,mars,jupiter,saturn,uranus,neptune,pluto,chiron,lilith,ceres,pallas,juno,vesta,halley,north lunar node,lunar apogee"
  - name: MINOR_ASPECT_BODIES
    value: "sun,mercury,venus,mars,jupiter,saturn,uranus,neptune,pluto,chiron,lilith,ceres,pallas,juno,vesta,halley,north lunar node,lunar apogee"
  - name: SPECIALTY_ASPECT_BODIES
    value: "sun,mercury,venus,mars,jupiter,saturn,uranus,neptune,pluto,chiron,lilith,ceres,pallas,juno,vesta,halley,north lunar node,lunar apogee"

  # ‚Ü©Ô∏è Retrograde Configuration
  - name: RETROGRADE_BODIES
    value: "mercury,venus,mars,jupiter,saturn,uranus,neptune,pluto,chiron,lilith,ceres,pallas,juno,vesta"

  # Planetary Phase Configuration
  - name: PLANETARY_PHASE_BODIES
    value: "venus,mercury,mars"

  # Retry Configuration
  - name: MAX_RETRIES
    value: "5"
  - name: INITIAL_DELAY_MS
    value: "1000"
  - name: MAX_DELAY_MS
    value: "30000"
  - name: BACKOFF_MULTIPLIER
    value: "2"

persistence:
  enabled: true
  storageClassName: "linode-block-storage-retain"
  accessMode: ReadWriteOnce
  size: 1Gi
  mountPath: /app/data

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 250m
    memory: 256Mi

nodeSelector: {}

tolerations: []

affinity: {}
