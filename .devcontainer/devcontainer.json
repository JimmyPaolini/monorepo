{
  "$schema": "https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainer.base.schema.json",
  "containerUser": "node",
  "customizations": {
    "vscode": {
      "recommendations": [
        "aaron-bond.better-comments", // Better Comments
        "adamhartford.vscode-base64", // vscode-base64
        "adpyke.vscode-sql-formatter", // SQL Formatter
        "bierner.comment-tagged-templates", // Comment tagged templates
        "bierner.markdown-mermaid", // Markdown Preview Mermaid Support
        "bradlc.vscode-tailwindcss", // Tailwind CSS IntelliSense
        "ChakrounAnas.turbo-console-log", // Turbo Console Log
        "charliermarsh.ruff", // Ruff
        "christian-kohler.npm-intellisense", // npm Intellisense
        "christian-kohler.path-intellisense", // Path Intellisense
        "ctf0.inline-fold-new", // Inline fold (new)
        "cweijan.dbclient-jdbc", // Database Client JDBC
        "cweijan.vscode-database-client2", // Database Client
        "dbaeumer.vscode-eslint", // ESLint
        "docker.docker", // Docker DX
        "donjayamanne.githistory", // Git History
        "earshinov.permute-lines", // Permute Lines
        "ecmel.vscode-html-css", // HTML CSS Support
        "esbenp.prettier-vscode", // Prettier - Code formatter
        "firsttris.vscode-jest-runner", // Jest / Vitest Runner
        "GitHub.copilot-chat", // GitHub Copilot Chat
        "github.vscode-github-actions", // GitHub Actions
        "GitHub.vscode-pull-request-github", // GitHub Pull Requests
        "GraphQL.vscode-graphql-syntax", // GraphQL: Syntax Highlighting
        "GraphQL.vscode-graphql", // GraphQL: Language Feature Support
        "hashicorp.terraform", // HashiCorp Terraform
        "IBM.output-colorizer", // Output Colorizer
        "iliazeus.vscode-ansi", // ANSI Colors
        "inferrinizzard.prettier-sql-vscode", // Prettier SQL VSCode
        "jasonnutter.vscode-codeowners", // CODEOWNERS
        "jsynowiec.vscode-insertdatestring", // Insert Date String
        "KevinRose.vsc-python-indent", // Python Indent
        "khaeransori.json2csv", // JSON to CSV
        "mechatroner.rainbow-csv", // Rainbow CSV
        "meganrogge.template-string-converter", // Template String Converter
        "mikestead.dotenv", // DotENV
        "ms-azuretools.vscode-containers", // Container Tools
        "ms-kubernetes-tools.vscode-kubernetes-tools", // Kubernetes
        "ms-python.debugpy", // Python Debugger
        "ms-python.isort", // isort
        "ms-python.python", // Python
        "ms-python.vscode-pylance", // Pylance
        "ms-python.vscode-python-envs", // Python Environments
        "ms-toolsai.datawrangler", // Data Wrangler
        "ms-toolsai.jupyter-keymap", // Jupyter Keymap
        "ms-toolsai.jupyter-renderers", // Jupyter Notebook Renderers
        "ms-toolsai.jupyter", // Jupyter
        "ms-toolsai.vscode-jupyter-cell-tags", // Jupyter Cell Tags
        "nguyenngoclong.terminal-keeper", // Terminal Keeper
        "nrwl.angular-console", // Nx Console
        "oderwat.indent-rainbow", // indent-rainbow
        "pflannery.vscode-versionlens", // Version Lens
        "PKief.material-icon-theme", // Material Icon Theme
        "quicktype.quicktype", // Paste JSON as Code
        "redhat.vscode-yaml", // YAML
        "rvest.vs-code-prettier-eslint", // Prettier ESLint
        "samuelcolvin.jinjahtml", // Better Jinja
        "sleistner.vscode-fileutils", // File Utils
        "streetsidesoftware.code-spell-checker", // Code Spell Checker
        "stringham.copy-with-imports", // Copy With Imports
        "tamasfe.even-better-toml", // Even Better TOML
        "vivaxy.vscode-conventional-commits", // Conventional Commits
        "wholroyd.jinja", // Jinja
        "YoavBls.pretty-ts-errors", // Pretty TypeScript Errors
        "yzhang.markdown-all-in-one" // Markdown All in One
      ],
      "unwantedRecommendations": [
        "alefragnani.Bookmarks", // Bookmarks
        "aljazsim.tsco", // TypeScript Code Organizer
        "altimateai.vscode-altimate-mcp-server", // Datamates
        "apollographql.vscode-apollo", // Apollo GraphQL
        "atlassian.atlascode", // Atlassian: Jira, Rovo Dev, Bitbucket
        "datadog.datadog-vscode", // Datadog
        "denoland.vscode-deno", // Deno
        "eamodio.gitlens", // GitLens - Git supercharged
        "firefox-devtools.vscode-firefox-debug", // Debugger for Firefox
        "inferrinizzard.prettier-sql-vscode", // Prettier SQL VSCode
        "innoverio.vscode-dbt-power-user", // Power User for dbt
        "janisdd.vscode-edit-csv", // Edit CSV
        "mongodb.mongodb-vscode", // MongoDB for VS Code
        "ms-azuretools.vscode-docker", // Docker
        "ms-edgedevtools.vscode-edge-devtools", // Microsoft Edge Tools for VS Code
        "ms-mssql.mssql", // SQL Server (mssql)
        "ms-python.black-formatter", // Black Formatter
        "ms-toolsai.vscode-jupyter-slideshow", // Jupyter Slide Show
        "mtxr.sqltools", // SQLTools
        "mxsdev.typescript-explorer", // TypeScript Explorer
        "njpwerner.autodocstring", // autoDocstring - Python Docstring Generator
        "Orta.vscode-jest", // Jest
        "Postman.postman-for-vscode", // Postman
        "ptweir.python-string-sql", // python-string-sql
        "Redis.redis-for-vscode", // Redis for VS Code
        "SanjulaGanepola.github-local-actions", // GitHub Local Actions
        "shinichi-takii.sql-bigquery", // SQL BigQuery
        "vitest.explorer", // Vitest
        "vscodevim.vim" // VIM
      ]
    }
  },
  "features": {
    "ghcr.io/devcontainers-extra/features/nx-npm:1": {
      "version": "latest"
    },
    "ghcr.io/devcontainers-extra/features/pnpm:2": {
      "version": "latest"
    },
    "ghcr.io/devcontainers-extra/features/terraform-asdf:0": {
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/docker-in-docker:2": {
      "azureDnsAutoDetection": true,
      "dockerDashComposeVersion": "v2",
      "installDockerBuildx": true,
      "installDockerComposeSwitch": true,
      "moby": true,
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/docker-in-docker:2.14.0": {
      "dockerDashComposeVersion": "v2",
      "installDockerBuildx": true,
      "installDockerComposeSwitch": true,
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/github-cli:1": {
      "installDirectlyFromGitHubRelease": true,
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/kubectl-helm-minikube:1": {
      "helm": "latest",
      "minikube": "latest",
      "version": "latest"
    },
    "ghcr.io/devcontainers/features/node:1": {
      "nodeGypDependencies": true,
      "nvmVersion": "latest",
      "pnpmVersion": "latest",
      "version": "lts"
    },
    "ghcr.io/devcontainers/features/python:1": {
      "enableShared": true,
      "installJupyterlab": true,
      "installTools": true,
      "optimize": true,
      "version": "latest"
    }
  },
  "forwardPorts": [3000, 54321, 54322, 54323, 54324, 54325],
  "image": "mcr.microsoft.com/devcontainers/typescript-node:22-bookworm",
  "mounts": [
    {
      "source": "monorepo-node-modules",
      "target": "${containerWorkspaceFolder}/node_modules",
      "type": "volume"
    },
    {
      "source": "monorepo-pnpm",
      "target": "/home/node/.local/share/pnpm",
      "type": "volume"
    },
    {
      "source": "monorepo-nx-cache",
      "target": "${containerWorkspaceFolder}/.nx/cache",
      "type": "volume"
    },
    {
      "source": "monorepo-extensions-${devcontainerId}",
      "target": "/root/.vscode-server/extensions",
      "type": "volume"
    }
  ],
  "name": "Monorepo Devcontainer",
  "portsAttributes": {
    "3000": {
      "label": "Lexico Dev Server",
      "onAutoForward": "notify"
    },
    "54321": {
      "label": "Supabase API (PostgREST)",
      "onAutoForward": "silent"
    },
    "54322": {
      "label": "Supabase PostgreSQL",
      "onAutoForward": "silent"
    },
    "54323": {
      "label": "Supabase Studio",
      "onAutoForward": "notify"
    },
    "54324": {
      "label": "Supabase Inbucket (Email)",
      "onAutoForward": "silent"
    },
    "54325": {
      "label": "Supabase Analytics",
      "onAutoForward": "silent"
    }
  },
  "postAttachCommand": {
    "post-attach-command": ".devcontainer/scripts/post-attach-command.sh"
  },
  "postCreateCommand": {
    "nx-graph": "npx nx graph --file=.nx/graph.json 2>/dev/null || true",
    "pnpm-install": "pnpm install --frozen-lockfile --prefer-offline",
    "post-create-command": ".devcontainer/scripts/post-create-command.sh"
  },
  "remoteEnv": {
    "NODE_OPTIONS": "--max-old-space-size=4096",
    "UV_THREADPOOL_SIZE": "4",
    "VSCODE_EXTENSION_HOST_WORKER_CONCURRENCY": "4"
  },
  "remoteUser": "node",
  "runArgs": [
    "--name",
    "monorepo-devcontainer",
    "--cpus=6",
    "--memory=12g",
    "--memory-swap=16g"
  ],
  "waitFor": "postCreateCommand"
}
